function getTableDatas(t,a,e){var d=e+"-1",o=e+"-31";"2017-9"==e||"2017-11"==e?o=e+"-30":"2017-12"==e&&(o=e+"-"+(new Date).getDate()),$.ajax({type:"GET",async:!1,url:t+"/customer/saleState",headers:{token:a},data:{begin:d,end:o},dataType:"json",success:function(t){if("200"==t.code){if(null!=t.data){var a={};a.thtml="<tr><td>线索总量</td><td>"+t.data.totalContact[0]+"</td><td>"+t.data.totalContact[1]+"</td><td>"+t.data.totalContact[2]+"</td></tr><tr><td>线索总量占比</td><td>"+Math.floor(1e4*t.data.totalContactPercent[0])/100+"%</td><td>"+Math.floor(1e4*t.data.totalContactPercent[1])/100+"%</td><td>"+Math.floor(1e4*t.data.totalContactPercent[2])/100+"%</td></tr><tr><td>线索新增量</td><td>"+t.data.addedContact[0]+"</td><td>"+t.data.addedContact[1]+"</td><td>"+t.data.addedContact[2]+"</td></tr><tr><td>线索新增占比</td><td>"+Math.floor(1e4*t.data.addedContactPercent[0])/100+"%</td><td>"+Math.floor(1e4*t.data.addedContactPercent[1])/100+"%</td><td>"+Math.floor(1e4*t.data.addedContactPercent[2])/100+"%</td></tr><tr><td>意向量</td><td>"+t.data.intentedContact[0]+"</td><td>"+t.data.intentedContact[1]+"</td><td>"+t.data.intentedContact[2]+"</td></tr><tr><td>意向率</td><td>"+Math.floor(1e4*t.data.intentedContactPercent[0])/100+"%</td><td>"+Math.floor(1e4*t.data.intentedContactPercent[1])/100+"%</td><td>"+Math.floor(1e4*t.data.intentedContactPercent[2])/100+"%</td></tr><tr><td>接通量</td><td>"+t.data.connectedContact[0]+"</td><td>"+t.data.connectedContact[1]+"</td><td>"+t.data.connectedContact[2]+"</td></tr><tr><td>接通率</td><td>"+Math.floor(1e4*t.data.connectedContactPercent[0])/100+"%</td><td>"+Math.floor(1e4*t.data.connectedContactPercent[1])/100+"%</td><td>"+Math.floor(1e4*t.data.connectedContactPercent[2])/100+"%</td></tr><tr><td>有效沟通量</td><td>"+t.data.validedContact[0]+"</td><td>"+t.data.validedContact[1]+"</td><td>"+t.data.validedContact[2]+"</td></tr><tr><td>有效沟通率</td><td>"+Math.floor(1e4*t.data.validedContactPercent[0])/100+"%</td><td>"+Math.floor(1e4*t.data.validedContactPercent[1])/100+"%</td><td>"+Math.floor(1e4*t.data.validedContactPercent[2])/100+"%</td></tr><tr><td>成单量</td><td>"+t.data.saledContact[0]+"</td><td>"+t.data.saledContact[1]+"</td><td>"+t.data.saledContact[2]+"</td></tr><tr><td>成单率</td><td>"+Math.floor(1e4*t.data.saledContactPercent[0])/100+"%</td><td>"+Math.floor(1e4*t.data.saledContactPercent[1])/100+"%</td><td>"+Math.floor(1e4*t.data.saledContactPercent[2])/100+"%</td></tr>",$(".table-box table tbody").html(a.thtml)}}else console.log(t.code)},error:function(t){console.log(t)}})}$(function(){function t(t){t.preventDefault()}var a=new Pdata,e=a.url(),d=a.token();null==d?window.location.href="index.html":getTableDatas(e,d,"2017-12"),$(".search-box .search-year").click(function(){event.stopPropagation(),$(this).find("ul").show()}),$(".search-box .search-year ul").click(function(){event.stopPropagation(),$(this).hide()}),$("body").click(function(){$(".search-box .search-year ul").hide()}),$(".search-box .search-month ul").on("touchstart",function(t){startX=t.originalEvent.changedTouches[0].pageX}),$(".search-box .search-month ul").on("touchend",function(t){moveEndX=t.originalEvent.changedTouches[0].pageX,X=moveEndX-startX,X>0?$(this).animate({left:"0"}):X<0&&$(this).animate({left:"-2.8rem"})}),$(".search-box .search-month ul li").click(function(){$(".search-box .search-month ul li").removeClass("on"),$(this).addClass("on");var t="2017-12";t=$(".search-box .search-year .tyear").attr("data-v")+"-"+$(".search-box .search-month ul li.on").attr("data-v"),getTableDatas(e,d,t)});var o,n,c=document.getElementById("change_box");c.addEventListener("touchstart",function(a){console.log(a);var e=a.touches[0];o=e.clientX-c.offsetLeft,n=e.clientY-c.offsetTop,document.addEventListener("touchmove",t,!1)},!1),c.addEventListener("touchmove",function(t){var a=t.touches[0],e=a.clientX-o,d=a.clientY-n;e<0?e=0:e>document.documentElement.clientWidth-c.offsetWidth&&(e=document.documentElement.clientWidth-c.offsetWidth),d<128&&(d=128),c.style.left=e+"px",c.style.top=d+"px"},!1),c.addEventListener("touchend",function(){document.removeEventListener("touchmove",t,!1)},!1)});